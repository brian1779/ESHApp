@page
@model ESHApp.Pages.ProcessPayComFileModel
@{
    ViewData["Title"] = "Process Paycom File";
}

<div class="container py-5">

    <!-- Instructions -->
    <h1 class="mb-4">Process Paycom File</h1>
    <p class="mb-5">
        Use this feature to upload your Paycom file, specify the pay period dates,
        and generate the 4 output files for NetSuite.
    </p>

    <!-- File selection + date inputs + process button -->
    <form method="post" enctype="multipart/form-data">
        <div class="mb-4">
            <label class="form-label">Pay Period Start Date</label>
            <input type="date" class="form-control" name="PayPeriodStart" />
        </div>

        <div class="mb-4">
            <label class="form-label">Pay Period End Date</label>
            <input type="date" class="form-control" name="PayPeriodEnd" />
        </div>

        <div class="mb-4">
            <label class="form-label">Choose Paycom File</label><br />
            <button type="button" class="btn btn-primary btn-xl" onclick="document.getElementById('fileInput').click();">Choose File</button>
            <input type="file" id="fileInput" name="PaycomFile" class="d-none" accept=".xlsx,.xls" />
            <p id="selectedFileName" class="mt-2 text-muted"></p>
        </div>

        <div class="mb-4">
            <button type="submit" class="btn btn-success btn-xl">Process File</button>
        </div>
    </form>

    <!-- Placeholder for validation messages -->
    <div class="text-danger mt-3">
        @Model.ErrorMessage
    </div>
    <div class="text-success mt-3">
        @Model.SuccessMessage
    </div>

</div>

<script>const fileInput = document.getElementById('fileInput');
    const processBtn = document.getElementById('processBtn');
    const selectedFileName = document.getElementById('selectedFileName');

    fileInput.addEventListener('change', function () {
        if (this.files && this.files[0]) {
            selectedFileName.innerText = "Selected file: " + this.files[0].name;
            processBtn.disabled = false; // Enable Process button when a file is selected
        } else {
            selectedFileName.innerText = "";
            processBtn.disabled = true; // Disable if no file selected
        }
    });

    processBtn.addEventListener('click', function () {
        alert('Process functionality coming soon!');
    });</script>